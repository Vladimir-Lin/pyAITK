# -*- coding: utf-8 -*-
##############################################################################
## YUVf
## YUV顏色模型 0~1浮點值域
##############################################################################
import cv2
import numpy as np
import colour
from . CommonColor import CommonColor
##############################################################################
class YUVf                    ( CommonColor                                ) :
  ############################################################################
  def __init__                ( self                                       ) :
    ##########################################################################
    self . ColorModel = "YUV"
    self . ValueType  = "Double"
    ##########################################################################
    self . Y          = float ( 0.0                                          )
    self . U          = float ( 0.0                                          )
    self . V          = float ( 0.0                                          )
    ##########################################################################
    return
  ############################################################################
  def __del__    ( self                                                    ) :
    ##########################################################################
    ##########################################################################
    return
  ############################################################################
  ## 轉成JSON格式
  ############################################################################
  def toJson ( self                                                        ) :
    return   { "Model" : "YUV"                                             , \
               "Value" : "Float"                                           , \
               "Y"     : self . Y                                          , \
               "U"     : self . U                                          , \
               "V"     : self . V                                            }
  ############################################################################
  ## 從JSON格式轉換顏色模型
  ############################################################################
  def fromJson       ( self , JSON                                         ) :
    ##########################################################################
    KEYs =           [ "Model" , "Value" , "Y" , "U" , "V"                   ]
    ##########################################################################
    for K in KEYs                                                            :
      if             ( K not in JSON                                       ) :
        return False
    ##########################################################################
    if               ( "YUV"   != JSON [ "Model" ]                         ) :
      return   False
    ##########################################################################
    if               ( "Float" != JSON [ "Value" ]                         ) :
      return   False
    ##########################################################################
    self . Y = float ( JSON [ "Y" ]                                          )
    self . U = float ( JSON [ "U" ]                                          )
    self . V = float ( JSON [ "V" ]                                          )
    ##########################################################################
    return     True
  ############################################################################
  def fromYUVi     ( self , iYUV                                           ) :
    ##########################################################################
    self . Y = int ( float ( iYUV . Y ) / 255.0                              )
    self . U = int ( float ( iYUV . U ) / 255.0                              )
    self . V = int ( float ( iYUV . V ) / 255.0                              )
    ##########################################################################
    if             ( self . Y < 0.0                                        ) :
      self . Y = 0.0
    ##########################################################################
    if             ( self . U < 0.0                                        ) :
      self . U = 0.0
    ##########################################################################
    if             ( self . V < 0.0                                        ) :
      self . V = 0.0
    ##########################################################################
    if             ( self . Y > 1.0                                        ) :
      self . Y = 1.0
    ##########################################################################
    if             ( self . U > 1.0                                        ) :
      self . U = 1.0
    ##########################################################################
    if             ( self . V > 1.0                                        ) :
      self . V = 1.0
    ##########################################################################
    return
##############################################################################
