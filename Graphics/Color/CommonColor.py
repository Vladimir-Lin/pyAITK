# -*- coding: utf-8 -*-
##############################################################################
## CommonColor
## 通用顏色模型
##############################################################################
class CommonColor (                                                        ) :
  ############################################################################
  def __init__    ( self                                                   ) :
    ##########################################################################
    self . ColorModel = ""
    self . ValueType  = ""
    ##########################################################################
    return
  ############################################################################
  def __del__    ( self                                                    ) :
    ##########################################################################
    ##########################################################################
    return
  ############################################################################
  def Model ( self                                                         ) :
    return self . ColorModel
  ############################################################################
  def VType ( self                                                         ) :
    return self . ValueType
  ############################################################################
  ## 轉成JSON格式
  ############################################################################
  def toJson                  ( self                                       ) :
    raise NotImplementedError (                                              )
  ############################################################################
  ## 從JSON格式轉換顏色模型
  ############################################################################
  def fromJson                ( self , JSON                                ) :
    raise NotImplementedError (                                              )
  ############################################################################
  def ConstraintUInt8 ( self , V                                           ) :
    ##########################################################################
    V   = int         (        V                                             )
    ##########################################################################
    if                (        V < 0                                       ) :
      V = 0
    ##########################################################################
    if                (        V > 255                                     ) :
      V = 255
    ##########################################################################
    return int        (        V                                             )
  ############################################################################
  def ScaleUInt8           ( self , V                                      ) :
    return ConstraintUInt8 ( V * 255.0                                       )
  ############################################################################
  def ConstraintFloat ( self , V                                           ) :
    ##########################################################################
    V   = float       (        V                                             )
    ##########################################################################
    if                (        V < 0.0                                     ) :
      V = 0.0
    ##########################################################################
    if                (        V > 1.0                                     ) :
      V = 1.0
    ##########################################################################
    return float      (        V                                             )
  ############################################################################
  def ScaleFloat                  ( self , V                               ) :
    return self . ConstraintFloat ( float ( V ) / 255.0                      )
  ############################################################################
  def Distance                ( self , C                                   ) :
    raise NotImplementedError (                                              )
  ############################################################################
  def Classify                ( self , RANGEs                              ) :
    ##########################################################################
    DCN     = ""
    MD      = float           ( "inf"                                        )
    ##########################################################################
    for CN , ( LV , UV ) in RANGEs . items ( )                               :
      ########################################################################
      C     = np . mean       ( [ LV , UV ] , axis = 0                       )
      D     = self . Distance ( C                                            )
      ########################################################################
      if                      ( D < MD                                     ) :
        ######################################################################
        MD  = D
        DCN = CN
    ##########################################################################
    return DCN
##############################################################################
