# -*- coding: utf-8 -*-
##############################################################################
## VtkBody
##############################################################################
import os
import sys
import time
import requests
import threading
import json
import pathlib
import vtk
##############################################################################
from   PySide6                                  import QtCore
from   PySide6                                  import QtGui
from   PySide6                                  import QtWidgets
from   PySide6 . QtCore                         import *
from   PySide6 . QtGui                          import *
from   PySide6 . QtWidgets                      import *
from   AITK    . Qt6                            import *
##############################################################################
from   AITK    . VTK6 . VtkWidget               import VtkWidget    as VtkWidget
from   AITK    . VTK6 . Wrapper                 import Wrapper      as VtkWrapper
##############################################################################
from   AITK    . Math . Geometry . ControlPoint import ControlPoint as ControlPoint
from   AITK    . Math . Geometry . Contour      import Contour      as Contour
from   AITK    . Math . Geometry . Circle       import Circle       as Circle
from   AITK    . Math . Geometry . Cylinder     import Cylinder     as Cylinder
from   AITK    . Math . Geometry . Plane        import Plane        as Plane
from   AITK    . Math . Geometry . Parabola     import Parabola     as Parabola
from   AITK    . Math . Geometry . Sphere       import Sphere       as Sphere
from   AITK    . Math . Geometry . Polyhedron   import Polyhedron   as Polyhedron
##############################################################################
from   AITK    . People . Faces  . Face         import Face         as FaceItem
##############################################################################
BODYDIR = os . path . dirname ( os . path . realpath ( __file__ )            )
##############################################################################
class VtkBody                 ( VtkWidget                                  ) :
  ############################################################################
  def __init__                ( self , parent = None , plan = None         ) :
    ##########################################################################
    super ( ) . __init__      (        parent        , plan                  )
    self . setVtkBodyDefaults (                                              )
    ##########################################################################
    return
  ############################################################################
  def sizeHint                   ( self                                    ) :
    return self . SizeSuggestion ( QSize ( 640 , 640 )                       )
  ############################################################################
  def setVtkBodyDefaults   ( self                                          ) :
    ##########################################################################
    ## self . dockingPlace = Qt . BottomDockWidgetArea
    ##########################################################################
    self . setFunction     ( self . HavingMenu , True                        )
    ##########################################################################
    self . setAcceptDrops  ( True                                            )
    ## self . setDragEnabled  ( True                                            )
    ## self . setDragDropMode ( QAbstractItemView . DragDrop                    )
    ##########################################################################
    return
  ############################################################################
  def LocalFile             ( self , Filename                              ) :
    ##########################################################################
    global BODYDIR
    ##########################################################################
    return os . path . join ( BODYDIR , Filename                             )
  ############################################################################
  ############################################################################
  ############################################################################
  ############################################################################
  ############################################################################
  ############################################################################
  def startup                       ( self                                 ) :
    ##########################################################################
    ## MALE   = self . LocalFile       ( "Male.json"                            )
    ## FEMALE = self . LocalFile       ( "Female.json"                          )
    ## print ( MALE , FEMALE )
    ##########################################################################
    self . renderer   . ResetCamera (                                        )
    self . interactor . Initialize  (                                        )
    self . interactor . Start       (                                        )
    ##########################################################################
    return
  ############################################################################
  ############################################################################
  ############################################################################
  ############################################################################
  ############################################################################
  ############################################################################
  ############################################################################
  ############################################################################
  ############################################################################
  def Menu                         ( self , pos                            ) :
    ##########################################################################
    doMenu = self . isFunction     ( self . HavingMenu                       )
    if                             ( not doMenu                            ) :
      return False
    ##########################################################################
    self   . Notify                ( 0                                       )
    ##########################################################################
    mm     = MenuManager           ( self                                    )
    ##########################################################################
    TRX    = self . Translations
    ##########################################################################
    msg    = TRX                   [ "UI::Refresh"                           ]
    icon   = QIcon                 ( ":/images/reload.png"                   )
    mm     . addActionWithIcon     ( 1001 , icon , msg                       )
    ##########################################################################
    self   . DockingMenu           ( mm                                      )
    ##########################################################################
    mm     . setFont               ( self    . menuFont ( )                  )
    aa     = mm . exec_            ( QCursor . pos      ( )                  )
    at     = mm . at               ( aa                                      )
    ##########################################################################
    ## if                             ( self . RunElementsMenu ( at )         ) :
    ##   return True
    ##########################################################################
    if                             ( self . RunDocking   ( mm , aa )       ) :
      return True
    ##########################################################################
    if                             ( at == 1001                            ) :
      ########################################################################
      ########################################################################
      return True
    ##########################################################################
    return True
##############################################################################
